"use strict";(self.webpackChunkInternationsFrontend=self.webpackChunkInternationsFrontend||[]).push([[927],{2927:(X,g,o)=>{o.r(g),o.d(g,{AddEditUserModule:()=>z});var l=o(9808),I=o(4449),n=o(3075),p=o(7423),f=o(4594),h=o(508),v=o(3071),a=o(9224),N=o(7446),C=o(7238),A=o(7531),S=o(4999),b=o(6087),T=o(8099),J=o(2638),O=o(2368),G=o(6688),Y=o(5899),L=o(8029),U=o(1271),Z=o(9764),E=o(4107),m=o(1083),y=o(1159),B=o(941),F=o(5783),t=o(5e3),Q=o(1805),c=o(7093),x=o(7322);function M(s,d){if(1&s&&(t.TgZ(0,"mat-option",18),t._uU(1),t.qZA()),2&s){const e=d.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e.groupName," ")}}function D(s,d){if(1&s&&(t.ynx(0),t.TgZ(1,"mat-form-field")(2,"mat-label"),t._uU(3,"Groups"),t.qZA(),t.TgZ(4,"mat-select",15,16),t.YNc(6,M,2,2,"mat-option",17),t.qZA()(),t.BQk()),2&s){const e=d.ngIf;t.xp6(6),t.Q6J("ngForOf",e)}}function j(s,d){1&s&&t._UZ(0,"div",19)}function K(s,d){1&s&&(t.TgZ(0,"div",19)(1,"h3"),t._uU(2,"findind users ...."),t.qZA()())}const R=[{path:"",component:(()=>{class s{constructor(e,r,i,u,P){this.activatedRoute=e,this.groupService=r,this.userService=i,this.router=u,this.snackBar=P,this.userForm=new n.cw({firstname:new n.NI("",n.kI.required),lastname:new n.NI("",n.kI.required),email:new n.NI("",n.kI.email),groups:new n.NI("",n.kI.required)}),this.userToAdd=new F.n,this.btnText="Add",this.separatorKeysCodes=[y.K5,y.OC],this.groupsOfUserToAdd=[]}ngOnInit(){this.groups$=this.groupService.getGroups(),this.groupsToSearch=this.groupService.getGroups(),this.activatedRoute.queryParams.subscribe(e=>{console.log("Got the userid as: ",e.userid),this.userIdToEdit=+e.userid,console.log("this.userToAdd ",this.userIdToEdit)}),null!==this.userToAdd?(this.getUserToUpdate(this.userIdToEdit),console.log("this.userToAdd je suis la ",this.userIdToEdit)):(this.groupsOfUserToAdd=[],this.btnText="Add")}onSubmit(){this.userToAdd=new F.n,this.groupFoundInList=new B.Z,this.userToAdd.firstName=this.userForm.value.firstname,this.userToAdd.lastName=this.userForm.value.lastname,this.userToAdd.email=this.userForm.value.email,this.userToAdd.groups=[...this.groupsOfUserToAdd],this.userForm.get("groups").value.forEach(e=>{""!=e&&-1==this.userToAdd.groups.findIndex(i=>i.groupid==e.groupid)&&this.userToAdd.groups.push(e)}),"Add"==this.btnText?(this.updateGroups(this.userToAdd.groups,this.userToAdd),this.addUser(this.userToAdd)):(this.userToAdd.userid=this.userIdToEdit,this.updateGroups(this.userToAdd.groups,this.userToAdd),this.updateUser(this.userToAdd))}getUserToUpdate(e){this.userService.getUsersByUserId(e).subscribe({next:r=>{this.userToEdit$=r,this.userForm.patchValue({firstname:r.firstName,lastname:r.lastName,email:r.email}),this.groupsOfUserToAdd=r.groups,this.btnText="Update"},error:r=>console.error("error occur during getting user to update  "),complete:()=>console.info("add user complete")})}addUser(e){this.userService.addUser(e).subscribe({next:r=>{this.showSnackbarDuration("User"+e.firstName+" "+e.lastName+" added ","Done","5000"),console.log("user added ",r)},error:r=>console.error("error occur during adding user ",r),complete:()=>console.info("add user complete")})}updateUser(e){this.userService.updateUser(e).subscribe({next:r=>{this.showSnackbarDuration("User"+e.firstName+" "+e.lastName+" updated ","Done","5000"),console.log("this is the data "+r)},error:r=>console.error("error occur during updating user ",r),complete:()=>console.info("add user complete")})}updateGroups(e,r){e.forEach(i=>{i.users.push(r),this.groupService.updateGroup(i).subscribe({next:u=>{console.log("updating groups ",u)},error:u=>console.error("error occur during update group ",u),complete:()=>console.info("update user complete")})})}showSnackbarDuration(e,r,i){this.snackBar.open(e,r,i)}goUsers(){return this.router.navigate(["/users"])}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(m.gz),t.Y36(Q.l),t.Y36(v.K),t.Y36(m.F0),t.Y36(U.ux))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-add-edit-user"]],decls:37,vars:7,consts:[["fxLayout","row","fxLayoutAlign","space-between center",1,"content",2,"background-color","#F5F6F7"],["mat-button","","color","primary",3,"click"],["color","primary"],[1,"container",2,"background-color","#1f70a1","color","#F5F6F7"],[3,"formGroup","ngSubmit"],["fxLayout","column","fxLayoutAlign","center center","fxLayoutGap","16px grid"],["fxFlex","100%"],["appearance","outline"],["matInput","","formControlName","firstname","placeholder","Firstname","name","firstname","required",""],["matInput","","formControlName","lastname","name","lastname","required",""],["matInput","","formControlName","email","name","email","required","","type","email"],[4,"ngIf","ngIfElse"],["nogroups",""],["mat-stroked-button","","color","primary","type","submit",3,"disabled"],["loading",""],["multiple","","formControlName","groups"],["select",""],["name","select",3,"value",4,"ngFor","ngForOf"],["name","select",3,"value"],[1,"loaing-container"]],template:function(e,r){if(1&e&&(t.TgZ(0,"mat-toolbar",0)(1,"button",1),t.NdJ("click",function(){return r.goUsers()}),t.TgZ(2,"mat-icon",2),t._uU(3,"keyboard_arrow_left"),t.qZA(),t._uU(4," Back "),t.qZA()(),t.TgZ(5,"mat-card",3)(6,"mat-card-header")(7,"mat-card-title"),t._uU(8,"User informations"),t.qZA()(),t.TgZ(9,"mat-card-content")(10,"form",4),t.NdJ("ngSubmit",function(){return r.onSubmit()}),t.TgZ(11,"div",5)(12,"div",6)(13,"mat-form-field",7)(14,"mat-label"),t._uU(15,"First Name"),t.qZA(),t._UZ(16,"input",8),t.qZA()(),t.TgZ(17,"div",6)(18,"mat-form-field",7)(19,"mat-label"),t._uU(20,"Last Name"),t.qZA(),t._UZ(21,"input",9),t.qZA()(),t.TgZ(22,"div",6)(23,"mat-form-field",7)(24,"mat-label"),t._uU(25,"Email"),t.qZA(),t._UZ(26,"input",10),t.qZA()(),t.TgZ(27,"div",6),t.YNc(28,D,7,1,"ng-container",11),t.ALo(29,"async"),t.YNc(30,j,1,0,"ng-template",null,12,t.W1O),t.qZA(),t.TgZ(32,"div",6)(33,"button",13),t._uU(34),t.qZA()()()(),t.YNc(35,K,3,0,"ng-template",null,14,t.W1O),t.qZA()()),2&e){const i=t.MAs(31);t.xp6(10),t.Q6J("formGroup",r.userForm),t.xp6(18),t.Q6J("ngIf",t.lcZ(29,5,r.groups$))("ngIfElse",i),t.xp6(5),t.Q6J("disabled",!r.userForm.valid),t.xp6(1),t.hij(" ",r.btnText," ")}},directives:[f.Ye,c.xw,c.Wh,p.lW,T.Hw,a.a8,a.dk,a.n5,a.dn,n._Y,n.JL,n.sg,c.SQ,c.yH,x.KE,x.hX,A.Nt,n.Fj,n.JJ,n.u,n.Q7,l.O5,E.gD,l.sg,h.ey],pipes:[l.Ov],styles:[""]}),s})()}];let W=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[[m.Bz.forChild(R)],m.Bz]}),s})(),z=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({providers:[v.K],imports:[[l.ez,W,p.ot,h.us,a.QW,f.g0,p.ot,N.p9,C.AV,A.c,S.p0,b.TU,T.Ps,J.SJ,O.rP,G.Hi,Y.Cv,U.ZX,L.KP,Z.o9,I.ie,Z.o9,n.u5,n.UX,E.LD]]}),s})()}}]);