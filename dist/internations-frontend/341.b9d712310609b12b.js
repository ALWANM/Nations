"use strict";(self.webpackChunkInternationsFrontend=self.webpackChunkInternationsFrontend||[]).push([[341],{9341:(K,f,r)=>{r.r(f),r.d(f,{UsersModule:()=>D});var u=r(9808),g=r(1083),v=r(1159),t=r(5e3),x=r(3071),Z=r(1805),h=r(1271),U=r(4594),d=r(7093),p=r(7423),C=r(8099),i=r(9224),T=r(7322),m=r(6688);function y(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"mat-icon",19),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().$implicit,a=t.oxw().$implicit;return t.oxw(2).removeGroupFromUser(s,a)}),t._uU(1,"cancel"),t.qZA()}}function A(o,c){if(1&o&&(t.TgZ(0,"mat-chip",17),t._uU(1),t.YNc(2,y,2,0,"mat-icon",18),t.qZA()),2&o){const e=c.$implicit,n=t.oxw(3);t.Q6J("removable",n.removable),t.xp6(1),t.hij(" ",e.groupName," "),t.xp6(1),t.Q6J("ngIf",n.removable)}}function F(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"div",9)(1,"mat-card",10)(2,"mat-card-header")(3,"mat-card-title"),t._uU(4),t.qZA()(),t._UZ(5,"img",11),t.TgZ(6,"mat-card-content")(7,"mat-label"),t._uU(8),t.qZA(),t._UZ(9,"br"),t.TgZ(10,"mat-label"),t._uU(11),t.qZA()(),t.TgZ(12,"mat-card-content")(13,"div",12)(14,"mat-chip-list",13,14),t.YNc(16,A,3,3,"mat-chip",15),t.qZA()()(),t.TgZ(17,"mat-card-actions")(18,"button",2),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.oxw(2).goEditUser(a.userid)}),t.TgZ(19,"mat-icon",16),t._uU(20,"edit"),t.qZA(),t._uU(21,"EDIT "),t.qZA(),t.TgZ(22,"button",2),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.oxw(2).deleteUser(a)}),t.TgZ(23,"mat-icon",16),t._uU(24,"delete"),t.qZA(),t._uU(25,"DELETE "),t.qZA()()()()}if(2&o){const e=c.$implicit;t.xp6(4),t.AsE("",e.firstName," ",e.lastName,""),t.xp6(4),t.AsE(" ",e.firstName," ",e.lastName," "),t.xp6(3),t.hij(" ",e.email," "),t.xp6(5),t.Q6J("ngForOf",e.groups)}}function b(o,c){if(1&o&&(t.ynx(0),t.TgZ(1,"div",7),t.YNc(2,F,26,6,"div",8),t.qZA(),t.BQk()),2&o){const e=c.ngIf;t.xp6(2),t.Q6J("ngForOf",e)}}function M(o,c){1&o&&(t.TgZ(0,"div",20)(1,"h3"),t._uU(2,"findind users ...."),t.qZA()())}const N=[{path:"",component:(()=>{class o{constructor(e,n,s,a){this.userService=e,this.groupService=n,this.router=s,this.snackBar=a,this.visible=!0,this.selectable=!0,this.removable=!0,this.addOnBlur=!0,this.separatorKeysCodes=[v.K5,v.OC]}ngOnInit(){this.users$=this.userService.getUsers()}deleteUser(e){this.userService.deleteUserByKey(e.userid).subscribe({next:n=>{this.updateGroups(e.groups,e),this.users$=this.userService.getUsers(),this.showSnackbarDuration("User "+e.firstName+" "+e.lastName+" deleted ","Done","5000")},error:n=>console.error("error occur during deletion user "+n),complete:()=>console.info("delete user complete")})}updateGroups(e,n){e.forEach(s=>{var a=s.users.findIndex(l=>l.email==n.email);-1!==a&&s.users.splice(a,1),this.groupService.updateGroup(s).subscribe({next:l=>{console.log("updating group ")},error:l=>console.error("error occur during update group "+l),complete:()=>console.info("update group complete")})})}removeGroupFromUser(e,n){console.log(e,n);var s=n.groups.findIndex(a=>a.groupid==e.groupid);-1!==s&&n.groups.splice(s,1),this.userService.updateUser(n).subscribe({next:a=>{this.updateGroups([e],n),this.users$=this.userService.getUsers()},error:a=>console.error("error occur during update group "+a),complete:()=>console.info("update group complete")}),console.log("user.groups.length",n.groups.length),0==n.groups.length&&(n.groups.push(e),this.deleteUser(n))}goEditUser(e){return this.router.navigate(["/addEditUser"],{queryParams:{userid:e}})}goAddUser(){return this.router.navigate(["/addEditUser"],{queryParams:{selected:"new"}})}showSnackbarDuration(e,n,s){this.snackBar.open(e,n,s)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(x.K),t.Y36(Z.l),t.Y36(g.F0),t.Y36(h.ux))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-users"]],decls:11,vars:4,consts:[["color","accent","fxLayout","row","fxLayoutAlign","space-between center",1,"content",2,"background-color","#F5F6F7"],["fxLayout","row","fxLayoutAlign","start center"],["mat-button","","color","primary",3,"click"],["color","primary"],["fxLayoutGap","16px grid",1,"content"],[4,"ngIf","ngIfElse"],["loading",""],["fxLayout","row wrap","fxLayout.lt-lg"," row wrap","fxLayoutGap","16px grid"],["fxFlex","25%","fxFlex.xs","100%","fxFlex.sm","33%",4,"ngFor","ngForOf"],["fxFlex","25%","fxFlex.xs","100%","fxFlex.sm","33%"],[1,"mat-elevation-z4"],["mat-card-image","","src","../../assets/img/pngwing.png"],[1,"scrollable"],["FormArrayName","Groups"],["chipList",""],["selectable","true",3,"removable",4,"ngFor","ngForOf"],["color","accent"],["selectable","true",3,"removable"],["matChipRemove","",3,"click",4,"ngIf"],["matChipRemove","",3,"click"],[1,"loaing-container"]],template:function(e,n){if(1&e&&(t.TgZ(0,"mat-toolbar",0),t._UZ(1,"div",1),t.TgZ(2,"button",2),t.NdJ("click",function(){return n.goAddUser()}),t.TgZ(3,"mat-icon",3),t._uU(4,"add"),t.qZA(),t._uU(5," Add "),t.qZA()(),t.TgZ(6,"div",4),t.YNc(7,b,3,1,"ng-container",5),t.ALo(8,"async"),t.qZA(),t.YNc(9,M,3,0,"ng-template",null,6,t.W1O)),2&e){const s=t.MAs(10);t.xp6(7),t.Q6J("ngIf",t.lcZ(8,2,n.users$))("ngIfElse",s)}},directives:[U.Ye,d.xw,d.Wh,p.lW,C.Hw,d.SQ,u.O5,u.sg,d.yH,i.a8,i.dk,i.n5,i.G2,i.dn,T.hX,m.qn,m.HS,m.qH,i.hq],pipes:[u.Ov],styles:[".mat-card[_ngcontent-%COMP%]{background:#fafafa;color:#1f70a1}.mat-table[_ngcontent-%COMP%]{background:#e5e6ec;color:#000}.mat-cell[_ngcontent-%COMP%], .mat-footer-cell[_ngcontent-%COMP%]{color:#070707}.mat-header-cell[_ngcontent-%COMP%]{color:#0c0c0cb3}ul[_ngcontent-%COMP%]{margin:0;padding:0}.scrollable[_ngcontent-%COMP%]{width:auto;height:100px;overflow-y:auto;overflow-x:hidden;white-space:nowrap}"]}),o})()}];let O=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[g.Bz.forChild(N)],g.Bz]}),o})();var E=r(508),S=r(7446),I=r(7238),J=r(7531),P=r(4999),G=r(6087),L=r(2638),Y=r(2368),$=r(5899),B=r(8029),H=r(9764),Q=r(4449);let D=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({providers:[x.K],imports:[[u.ez,O,p.ot,E.us,i.QW,U.g0,p.ot,S.p9,I.AV,J.c,P.p0,G.TU,C.Ps,L.SJ,Y.rP,m.Hi,$.Cv,h.ZX,B.KP,H.o9,Q.ie]]}),o})()}}]);