"use strict";(self.webpackChunkInternationsFrontend=self.webpackChunkInternationsFrontend||[]).push([[615],{615:(D,f,n)=>{n.r(f),n.d(f,{GroupsModule:()=>Q});var u=n(9808),g=n(1083),o=n(5e3),v=n(1805),Z=n(3071),x=n(1271),h=n(4594),p=n(7093),m=n(7423),G=n(8099),a=n(9224),C=n(7322),d=n(6688);function y(e,i){if(1&e){const t=o.EpF();o.TgZ(0,"mat-icon",19),o.NdJ("click",function(){o.CHM(t);const s=o.oxw().$implicit,c=o.oxw().$implicit;return o.oxw(2).removeUserFromGroup(s,c)}),o._uU(1,"cancel"),o.qZA()}}function T(e,i){if(1&e&&(o.TgZ(0,"mat-chip",17),o._uU(1),o.YNc(2,y,2,0,"mat-icon",18),o.qZA()),2&e){const t=i.$implicit,r=o.oxw(3);o.Q6J("removable",r.removable),o.xp6(1),o.AsE(" ",t.firstName," ",t.lastName," "),o.xp6(1),o.Q6J("ngIf",r.removable)}}function A(e,i){if(1&e){const t=o.EpF();o.TgZ(0,"div",9)(1,"mat-card",10)(2,"mat-card-header")(3,"mat-card-title"),o._uU(4),o.qZA()(),o._UZ(5,"img",11),o.TgZ(6,"mat-card-content")(7,"mat-label"),o._uU(8," Groups members "),o.qZA(),o._UZ(9,"br"),o.qZA(),o.TgZ(10,"mat-card-content")(11,"div",12)(12,"mat-chip-list",13,14),o.YNc(14,T,3,4,"mat-chip",15),o.qZA()()(),o.TgZ(15,"mat-card-actions")(16,"button",2),o.NdJ("click",function(){const c=o.CHM(t).$implicit;return o.oxw(2).goEditGroup(c.groupid)}),o.TgZ(17,"mat-icon",16),o._uU(18,"edit"),o.qZA(),o._uU(19,"EDIT "),o.qZA(),o.TgZ(20,"button",2),o.NdJ("click",function(){const c=o.CHM(t).$implicit;return o.oxw(2).deleteGroup(c)}),o.TgZ(21,"mat-icon",16),o._uU(22,"delete"),o.qZA(),o._uU(23,"DELETE "),o.qZA()()()()}if(2&e){const t=i.$implicit;o.xp6(4),o.Oqu(t.groupName),o.xp6(10),o.Q6J("ngForOf",t.users)}}function F(e,i){if(1&e&&(o.ynx(0),o.TgZ(1,"div",7),o.YNc(2,A,24,2,"div",8),o.qZA(),o.BQk()),2&e){const t=i.ngIf;o.xp6(2),o.Q6J("ngForOf",t)}}function U(e,i){1&e&&(o.TgZ(0,"div",20)(1,"h3"),o._uU(2,"findind Groups ...."),o.qZA()())}const b=[{path:"",component:(()=>{class e{constructor(t,r,s,c){this.groupService=t,this.userService=r,this.router=s,this.snackBar=c,this.removable=!0}ngOnInit(){this.groups$=this.groupService.getGroups(),console.log("this.groups$",this.groups$)}deleteGroup(t){console.log("deletion user "+t.groupid),this.groupService.deleteGroupByKey(t.groupid).subscribe({next:r=>{this.updateUsers(t.users,t),this.groups$=this.groupService.getGroups(),this.showSnackbarDuration("Group "+t.groupName+" deleted ","Done","5000"),console.log("this is the data ",r)},error:r=>console.error("error occur during deletion user "+r),complete:()=>console.info("delete user complete")})}goEditGroup(t){return this.router.navigate(["/groupAddEdit"],{queryParams:{groupid:t}})}goAddGroup(){return this.router.navigate(["/groupAddEdit"],{queryParams:{new:""}})}updateUsers(t,r){t.forEach(s=>{var c=s.groups.findIndex(l=>l.groupName==r.groupName);-1!==c&&s.groups.splice(c,1),this.userService.updateUser(s).subscribe({next:l=>{console.log("updating user ")},error:l=>console.error("error occur during update group "+l),complete:()=>console.info("update user complete")})})}removeUserFromGroup(t,r){console.log(t,r);var s=r.users.findIndex(c=>c.userid==t.userid);-1!==s&&r.users.splice(s,1),this.groupService.updateGroup(r).subscribe({next:c=>{this.updateUsers([t],r),this.groups$=this.groupService.getGroups()},error:c=>console.error("error occur during update group "+c),complete:()=>console.info("update group complete")}),console.log("group.users.length",r.users.length),0==r.users.length&&(r.users.push(t),this.deleteGroup(r))}deleteUser(t){this.userService.deleteUserByKey(t.userid).subscribe({next:r=>{console.log("delete user because he hasn't any more groups")},error:r=>console.error("error occur during deletion user "+r),complete:()=>console.info("delete user complete")})}showSnackbarDuration(t,r,s){this.snackBar.open(t,r,s)}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(v.l),o.Y36(Z.K),o.Y36(g.F0),o.Y36(x.ux))},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-groups"]],decls:11,vars:4,consts:[["color","accent","fxLayout","row","fxLayoutAlign","space-between center",1,"content",2,"background-color","#F5F6F7"],["fxLayout","row","fxLayoutAlign","start center"],["mat-button","","color","primary",3,"click"],["color","primary"],["fxLayoutGap","16px grid",1,"content"],[4,"ngIf","ngIfElse"],["loading",""],["fxLayout","row wrap","fxLayout.lt-lg"," row wrap","fxLayoutGap","16px grid"],["fxFlex","25%","fxFlex.xs","100%","fxFlex.sm","33%",4,"ngFor","ngForOf"],["fxFlex","25%","fxFlex.xs","100%","fxFlex.sm","33%"],[1,"mat-elevation-z4"],["mat-card-image","","src","../../assets/img/pngwing.png"],[1,"scrollable"],["FormArrayName","Groups"],["chipList",""],[3,"removable",4,"ngFor","ngForOf"],["color","accent"],[3,"removable"],["matChipRemove","",3,"click",4,"ngIf"],["matChipRemove","",3,"click"],[1,"loaing-container"]],template:function(t,r){if(1&t&&(o.TgZ(0,"mat-toolbar",0),o._UZ(1,"div",1),o.TgZ(2,"button",2),o.NdJ("click",function(){return r.goAddGroup()}),o.TgZ(3,"mat-icon",3),o._uU(4,"add"),o.qZA(),o._uU(5," Add "),o.qZA()(),o.TgZ(6,"div",4),o.YNc(7,F,3,1,"ng-container",5),o.ALo(8,"async"),o.qZA(),o.YNc(9,U,3,0,"ng-template",null,6,o.W1O)),2&t){const s=o.MAs(10);o.xp6(7),o.Q6J("ngIf",o.lcZ(8,2,r.groups$))("ngIfElse",s)}},directives:[h.Ye,p.xw,p.Wh,m.lW,G.Hw,p.SQ,u.O5,u.sg,p.yH,a.a8,a.dk,a.n5,a.G2,a.dn,C.hX,d.qn,d.HS,d.qH,a.hq],pipes:[u.Ov],styles:[".mat-card[_ngcontent-%COMP%]{background:#fafafa;color:#1f70a1}.mat-table[_ngcontent-%COMP%]{background:#e5e6ec;color:#000}.mat-cell[_ngcontent-%COMP%], .mat-footer-cell[_ngcontent-%COMP%]{color:#070707}.mat-header-cell[_ngcontent-%COMP%]{color:#0c0c0cb3}ul[_ngcontent-%COMP%]{margin:0;padding:0}.scrollable[_ngcontent-%COMP%]{width:auto;height:100px;overflow-y:auto;overflow-x:hidden;white-space:nowrap}"]}),e})()}];let M=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[[g.Bz.forChild(b)],g.Bz]}),e})();var N=n(508),O=n(7446),S=n(7238),E=n(7531),I=n(4999),J=n(6087),P=n(2638),$=n(2368),L=n(5899),Y=n(8029),B=n(9764),H=n(4449);let Q=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({providers:[v.l],imports:[[u.ez,M,m.ot,N.us,a.QW,h.g0,m.ot,O.p9,S.AV,E.c,I.p0,J.TU,G.Ps,P.SJ,$.rP,d.Hi,L.Cv,x.ZX,Y.KP,B.o9,H.ie]]}),e})()}}]);